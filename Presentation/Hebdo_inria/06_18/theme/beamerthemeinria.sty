%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%         Copyright (c) 2023, gitlabci_gallery / latex
%         All rights reserved.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%
% LaTeX beamer theme, Inria 2024
% \ProvidesPackageRCS beamerthemeinria.sty
%
\mode<presentation>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% General 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% titre slide table of contents. \contentsname est proposé
% à la fois par beamer et redéfini ensuite dans babel.
%  \newcommand{\contentsname}{Sommaire}

% titre planche "\merci"
\newcommand{\thankyou}{Merci.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage{tikz}
\usetikzlibrary{arrows.meta, positioning, shapes.geometric, arrows, backgrounds, fit}
\RequirePackage{amssymb}
\usepackage{array}
\usepackage[normalem]{ulem}
\RequirePackage{fmtcount}
\RequirePackage{calc}
\RequirePackage{ifdraft}


\IfFileExists{inriafontes.sty}{%
\RequirePackage[InriaSans]{inriafontes}%
}{%
\PackageWarning{themeinria}{\MessageBreak
==============================================\MessageBreak
= Utilisez le paquet\MessageBreak
= gitlab.inria.fr/gabarits/latex-inria-fonts\MessageBreak
= pour utiliser les fontes Inria.\MessageBreak
==============================================\MessageBreak}
\newcommand{\switchtosans}{}
\newcommand{\switchtoserif}{}
}%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% TEXTPOS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[absolute,overlay]{textpos}

% Point de référence
\textblockorigin{0mm}{0mm}

% Unités en abscisses et en ordonnées
\setlength{\TPHorizModule}{\paperwidth}
\setlength{\TPVertModule}{\paperheight}

% \TPshowboxestrue

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Logos & images
%% - bloc marque RF+Inria
%% - logo Inria
%% - angle supérieur gauche
%% - barre dégradée
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\logopremiere}{theme/imgs/RF-INria_Bloc-marque.png}
\newcommand{\logobaspage}{theme/imgs/Inria-logo-rouge.png}

\newcommand{\pngangle}{theme/imgs/angle.png}
\newcommand{\pngbarre}{theme/imgs/Filet-7pt.png}

\newlength\titlelogowidth
\setlength\titlelogowidth{.3\textwidth}
\pgfdeclareimage[width=\titlelogowidth]{InriaTitle}{\logopremiere}
\newcommand{\titlelogo}{\pgfuseimage{InriaTitle}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Slide title & decoration
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pgfdeclareimage[height=2ex]{Angle}{\pngangle}
\newcommand{\anglepng}{\pgfuseimage{Angle}}

\newlength{\angleheight}
\settoheight{\angleheight}{\pgfuseimage{Angle}}
\newlength{\anglewidth}
\settowidth{\anglewidth}{\pgfuseimage{Angle}}

\pgfdeclareimage[width=6em]{Barre}{\pngbarre}
\newcommand{\barrecouleur}{\pgfuseimage{Barre}}

\pgfdeclareimage[width=4em]{BarreQ}{\pngbarre}
\newcommand{\barrecouleurQ}{\pgfuseimage{BarreQ}}

\pgfdeclareimage[width=5em]{BarreC}{\pngbarre}
\newcommand{\barrecouleurC}{\pgfuseimage{BarreC}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Fullpage & Canvas
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% vertical margin
\newlength\vmargin
\setlength\vmargin{.07\paperheight}

\newlength\fullpageinnervmargin
\setlength\fullpageinnervmargin{\vmargin}

%% horizontal margin
\newlength\hmargin
\setlength\hmargin{.05\paperwidth}

\newlength\fullpageinnerhmargin
\setlength\fullpageinnerhmargin{\dimexpr\hmargin+2\anglewidth}

\setbeamersize{%
  text margin left = \fullpageinnerhmargin,
  text margin right = \fullpageinnerhmargin,
}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Footer
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newlength\footerheight
\setlength\footerheight{\fullpageinnervmargin-1pt}

\pgfdeclareimage[height=0.4\footerheight]{InriaFooter}{\logobaspage}
\newcommand{\footerlogo}{\pgfuseimage{InriaFooter}}

\newlength\posfooterline
\setlength\posfooterline{\fullpageinnervmargin}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Couleurs
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Navigation
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setbeamertemplate{navigation symbols}{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Blocks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setbeamercolor{block title}{fg=inria-noir}
\setbeamerfont{block title}{series=\bfseries}

\setbeamercolor{block title example}{fg=inria-noir}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Listes: item / enumerate 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\itemlevelone}{\tikz{%
   \draw[fill=inria-rouge, color=inria-rouge, line width=0pt] %
   (0,0.5ex) -- (0.7em,0) -- (0,-0.5ex); }}
\newcommand{\itemleveltwo}{\tikz{%
   \draw[fill=inria-noir,  color=inria-noir,  line width=0pt] %
   circle(0.5ex); }}
\newcommand{\itemlevelthree}{\tikz{%
   \draw[fill=inria-rouge, color=inria-rouge, line width=0pt] %
   (0,-0.5ex) rectangle (0.5em,0.5ex); }}

\setlength{\leftmargini}{1.5em}
\setlength{\leftmarginii}{0pt}
\setlength{\leftmarginiii}{0pt}

\setbeamertemplate{item projected}[default]
\setbeamertemplate{itemize items}{\itemlevelone}
\setbeamertemplate{itemize subitem}{\itemleveltwo}
\setbeamertemplate{itemize subsubitem}{\itemlevelthree}

\setbeamertemplate{enumerate items}{$\square$}

% \setbeamertemplate{enumerate items}{\itemleveltwo}
% \setbeamertemplate{enumerate subitems}[default]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Fonts
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setbeamerfont{footline}{size=\tiny,series={}}

\setbeamerfont{normal text}{}
\setbeamerfont{alerted text}{series=\bfseries}
\setbeamerfont{example text}{series=\bfseries}

\AtBeginDocument{%
  % switch to SansSerif fonts
  \switchtosans
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Insérer du code
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{listings}
\usepackage{xcolor}
\usepackage{caption}

% Configuration du package listings
% Style pour le langage C
\lstdefinestyle{CStyle}{
  language=C,
  basicstyle=\ttfamily\tiny,
  keywordstyle=\color{keywordColor}\ttfamily,
  stringstyle=\color{stringColor}\ttfamily,
  commentstyle=\color{commentColor}\ttfamily,
  numbers=left,
  numberstyle=\tiny\color{numberColor},
  stepnumber=1,
  numbersep=5pt,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=false,
  escapeinside={\%*}{*)}
}


% Style pour les Makefiles
\lstdefinestyle{MakefileStyle}{
  morekeywords={all},
  basicstyle=\ttfamily\small,
  keywordstyle=\color{keywordColor}\ttfamily\bfseries,
  stringstyle=\color{stringColor}\ttfamily,
  commentstyle=\color{commentColor}\ttfamily,
  frame=single,
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=false,
  escapeinside={\%*}{*)},
  morecomment=[l][\color{stringColor}]{\$(}{)},
  morekeywords=[1]{DIRECTORY, ENUM_FILE, GREP, HOME, all, enumerate, target, clean},
  morekeywords=[2]{@echo, @ls, grep, @rm, python3},
  keywordstyle=[1]\color{keywordColor},
  keywordstyle=[2]\color{Orchid},
}


\lstdefinestyle{global}{
basicstyle=\ttfamily\scriptsize\color{black!90},%
stringstyle=\itshape\color{magenta},%
showstringspaces=false,%
keywordstyle=\bfseries\color{keywordColor},%
commentstyle=\color{blue}\slshape,%
framexleftmargin=1mm,%
backgroundcolor=\color{black!2},%
frame=single,
tabsize=2,
captionpos=b,
}

\lstdefinestyle{global2}{
basicstyle=\ttfamily\small\color{black!90},%
stringstyle=\itshape\color{magenta},%
showstringspaces=false,%
alsoletter=-,
morekeywords=[1]{-Ox},
keywordstyle=[1]\color{keywordColor},
moredelim=[il][\color{green}]{\$}{/}
framexleftmargin=1mm,%
backgroundcolor=\color{black!2},%
frame=single,
tabsize=2,
captionpos=b,
}

\lstdefinestyle{makefile}{
style=global,%
columns=fullflexible,
morekeywords=[1]{DIRECTORY, ENUM_FILE, GREP, HOME, all, enumerate, target, clean, \$},
morekeywords=[2]{\@, echo, ls, grep, rm, python3, cp, mkdir},
keywordstyle=[1]\color{keywordColor},
keywordstyle=[2]\color{Orchid},
emphstyle={\color{Orchid}},%
moredelim=[s][\color{green}]{\$(}{)}
}

% Style pour les .ini
\lstdefinestyle{INIStyle}{
  basicstyle=\ttfamily\small,
  columns=fullflexible,
  morecomment=[s][\color{Orchid}\bfseries]{[}{]},
  morecomment=[l]{\#},
  morecomment=[l]{;},
  morekeywords=[1]{in , to ,do, at, from, with, all},
  morekeywords=[2]{starting, halt, core, hook, for, end, secret, explore, load, global, sections},
  morekeywords=[3]{@},
  morekeywords=[4]{:,=},
  keywordstyle=[1]\color{ini_valueColor}\ttfamily\bfseries,
  keywordstyle=[2]\color{ini_keyColor}\ttfamily\bfseries,
  keywordstyle=[3]\color{green}\ttfamily\bfseries,
  keywordstyle=[4]\color{blue},
  commentstyle=\color{ini_commentColor}\ttfamily,
  showspaces=false,
  showstringspaces=false,
  showtabs=false,
  frame=single,
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=false,
  escapeinside={\%*}{*)},
}

% Style pour gdb
\lstdefinestyle{GDBStyle}{
  basicstyle=\ttfamily\small,
  columns=fullflexible,
  alsoletter={-},
  morekeywords={generate-core-file},
  morekeywords={break, run, kill, quit},
  keywordstyle=\color{ini_keyColor}\ttfamily\bfseries,
  frame=single,
  tabsize=2,
  captionpos=b,
  breaklines=true,
  breakatwhitespace=false
}

\renewcommand{\lstlistingname}{Code} % Renommer "Listing" en "Code"
\renewcommand{\lstlistlistingname}{Liste des codes} % Renommer la liste des listings
\newcounter{counterCaption}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Appel au informations supplémentaires
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usecolortheme{inria}
\useoutertheme{inria}
\useinnertheme{inria}


\usepackage{dirtree} % arboresence de fichiers
\usepackage{amssymb} %symbole jolies
\usepackage{colortbl} % couleur dans un tabular

\mode<all>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%